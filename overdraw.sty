\NeedsTeXFormat{LaTeX2e}[2019/05/28]
\ProvidesPackage{overdraw}[2019/05/28 OverDraw Package]

\RequirePackage{xparse}
\RequirePackage{float}
\RequirePackage{tikz}

\NewDocumentEnvironment \overdraw { o o m +b } {%
    \IfNoValueTF{#1} {
        \IfNoValueTF{#2} { {
            \begin{tikzpicture}
            \node[anchor=south west, inner sep = 0] (image) at (0,0) {
                \includegraphics{#3}
            } \begin{scope}[x={(image.south east)},y={(image.north west)}] }
            #4 { \end{scope}
            \end{tikzpicture} }
        } { {
            \begin{tikzpicture}
            \node[anchor=south west, inner sep = 0] (image) at (0,0) {
                \includegraphics{#3}
            } \begin{scope}[x={(image.south east)/#2},y={(image.north west)}] }
            #4 { \end{scope}
            \end{tikzpicture} }
        }
    } { {
        \begin{tikzpicture}
        \node[anchor=south west, inner sep = 0] (image) at (0,0) {
            \includegraphics{#3}
        } \begin{scope}[x={(image.south east)/#1},y={(image.north west)/#2}] }
        #4 { \end{scope}
        \end{tikzpicture} }
    }
}

\endinput
